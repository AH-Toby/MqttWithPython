# MQTT用户密码认证

| 报文字段        | 解释             | 示例              | 是否必填 | 注意事项                 |
| --------------- | ---------------- | ----------------- | -------- | ------------------------ |
| clientId        | 客户端ID         | "client-1"        | 必填     | 必须唯一                 |
| cleanSession    | 清除会话         | false             | 必填     | 默认为true               |
| <u>username</u> | 用户名称         | <u>"toby"</u>     | 非必填   | 服务端鉴权用             |
| <u>password</u> | 用户密码         | <u>"123"</u>      | 非必填   | 服务端鉴权用             |
| lastWillTopic   | 遗嘱主题         | "/hans/will"      | 非必填   | 异常断线使用             |
| lastWillQos     | 遗嘱服务质量等级 | 2                 | 非必填   | 异常断线使用只有0,1,2    |
| lastWillMessage | 遗嘱消息         | "unexpected exit" | 非必填   | 异常断线使用             |
| lastWillRetain  | 遗嘱保留         | fase              | 非必填   | 默认为false,异常断线使用 |
| keepAlive       | 心跳时间间隔     | 60                | 必填     | 数字类型                 |

有些MQTT服务端需要客户端在连接时提供用户名和密码。只有客户端正确提供了用户名和密码后，才能连接服务端。否则服务端将会拒绝客户端连接，那么客户端也就无法发布和订阅消息了。

请注意，username(用户名)和password（密码）是可选的CONNECT信息。也就是说，有些服务端开启了客户端用户密码认证，这种服务端需要客户端在连接时正确提供认证信息才能连接。当然，那些没有开启用户密码认证的服务端无需客户端提供用户名和密码认证信息。

在以上示例中，我们看到此CONNECT报文中所包含的用户名是“toby”，密码是“123”。

用户名和密码除了有以上功能外，有些公用MQTT服务端也利用此信息来识别客户端属于哪一个用户，从而对客户端进行管理。比如用户可以拥有私人主题，这些主题只有该用户可以发布和订阅。对于私人主题，服务端就可以利用客户端连接时的用户名和密码来判断该客户端是否有发布订阅该用户私人主题的权限

